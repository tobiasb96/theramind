{% load django_tables2 %}
{% load i18n %}

{% block table-wrapper %}
    <div class="table-container">
        {% block table %}
            <div class="overflow-x-auto">
                <table class="w-full table-auto text-md text-left rounded text-gray-900 bg-white">
                    {% block table.thead %}
                        {% if table.show_header %}
                            <thead class="text-xs text-gray-600 font-normal border border-blue-200 bg-blue-100">
                            <tr>
                                {% for column in table.columns %}
                                    <th scope="col" class="py-3 px-6">
                                        {% if column.orderable %}
                                            <div class="flex flex-row items-center space-x-2">
                                                <a class="flex flex-row space-x-1 items-center"
                                                   href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}">
                                                    <span class="uppercase"> {{ column.header }} </span>
                                                </a>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 ml-1"
                                                     aria-hidden="true" fill="currentColor" viewBox="0 0 320 512">
                                                    <path d="M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224zM292.3 288H27.66c-24.6 0-36.89 29.77-19.54 47.12l132.5 136.8C145.9 477.3 152.1 480 160 480c7.053 0 14.12-2.703 19.53-8.109l132.3-136.8C329.2 317.8 316.9 288 292.3 288z"/>
                                                </svg>
                                            </div>
                                        {% else %}
                                            <span class="uppercase"> {{ column.header }} </span>
                                        {% endif %}
                                    </th>
                                {% endfor %}
                            </tr>
                            </thead>
                        {% endif %}
                    {% endblock table.thead %}
                    {% block table.tbody %}
                        <tbody class="bg-white divide-y divide-gray-200">
                        {% for row in table.paginated_rows %}
                            {% block table.tbody.row %}
                                <tr class="transition-colors duration-200 bg-white border border-gray-200 hover:bg-gray-50">
                                    {% for column, cell in row.items %}
                                        {% if "</th>" in cell %}
                                            {{ cell }}
                                        {% else %}
                                            <td class="break-words py-4 px-6">
                                                {% if column.localize == None %}{{ cell }}{% else %}
                                                    {% if column.localize %}
                                                        {{ cell|localize }}{% else %}{{ cell|unlocalize }}
                                                    {% endif %}{% endif %}
                                            </td>
                                        {% endif %}
                                    {% endfor %}
                                </tr>
                            {% endblock table.tbody.row %}
                            {% empty %}
                            {% if table.empty_text %}
                                {% block table.tbody.empty_text %}
                                    <tr>
                                        <td colspan="{{ table.columns|length }}" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">{{ table.empty_text }}</td>
                                    </tr>
                                {% endblock table.tbody.empty_text %}
                            {% endif %}
                        {% endfor %}
                        </tbody>
                    {% endblock table.tbody %}
                    {% block table.tfoot %}
                        {% if table.has_footer %}
                            <tfoot {{ table.attrs.tfoot.as_html }}>
                            <tr>
                                {% for column in table.columns %}
                                    <td {{ column.attrs.tf.as_html }}>{{ column.footer }}</td>
                                {% endfor %}
                            </tr>
                            </tfoot>
                        {% endif %}
                    {% endblock table.tfoot %}
                </table>
            </div>
        {% endblock table %}

        {% block pagination %}
            <nav class="flex items-center justify-between p-4" aria-label="Table navigation">
                <span class="text-sm font-normal text-gray-500">Zeigt <span
                        class="font-semibold text-gray-900"> {{ table.page.start_index }}-{{ table.page.end_index }} </span> von <span
                        class="font-semibold text-gray-900">{{ table.paginator.count }}</span> Ergebnissen </span>

                {% if table.page and table.paginator.num_pages > 1 %}
                    <ul class="inline-flex items-center -space-x-px">
                        {% if table.page.has_previous %}
                            {% block pagination.previous %}
                                <li class="previous">
                                    <a href="{% querystring table.prefixed_page_field=table.page.previous_page_number %}"
                                       class="block px-3 py-2 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-blue-100 hover:text-blue-600">
                                        <span class="sr-only">Vorherige</span>
                                        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor"
                                             viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd"
                                                  d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                                                  clip-rule="evenodd"></path>
                                        </svg>
                                    </a>
                                </li>
                            {% endblock pagination.previous %}
                        {% endif %}
                        {% if table.page.has_previous or table.page.has_next %}
                            {% block pagination.range %}
                                {% for p in table.page|table_page_range:table.paginator %}
                                    <li {% if p == table.page.number %}class="active"{% endif %}>
                                        {% if p == '...' %}
                                            <a href="#"
                                               class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-blue-100 hover:text-blue-600">
                                                {{ p }}
                                            </a>
                                        {% elif p > table.page.number|add:'-3' and p < table.page.number|add:'3' %}
                                            <a href="{% querystring table.prefixed_page_field=p %}"
                                               class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-blue-100 hover:text-blue-600">
                                                {{ p }}
                                            </a>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            {% endblock pagination.range %}
                        {% endif %}
                        {% if table.page.has_next %}
                            {% block pagination.next %}
                                <li class="next">
                                    <a href="{% querystring table.prefixed_page_field=table.page.next_page_number %}"
                                       class="block px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-blue-100 hover:text-blue-600">
                                        <span class="sr-only">NÃ¤chste</span>
                                        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                                             xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd"
                                                  d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                                  clip-rule="evenodd"></path>
                                        </svg>
                                    </a>
                                </li>
                            {% endblock pagination.next %}
                        {% endif %}
                    </ul>
                {% endif %}
            </nav>
        {% endblock pagination %}
    </div>
{% endblock table-wrapper %}
