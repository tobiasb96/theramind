{% load static %}

<div class="w-full">
    <div class="mb-2">
        <label for="{{ editor_id }}" class="block text-sm font-medium text-gray-700 mb-2">{{ label|default:"Editor" }}</label>
    </div>
    <div class="w-full border border-gray-200 rounded-lg bg-gray-50">
        <!-- Toolbar -->
        <div class="px-3 py-2 border-b border-gray-200">
            <div class="flex flex-wrap items-center">
                <div class="flex items-center space-x-1 rtl:space-x-reverse flex-wrap">
                    <!-- Bold -->
                    <button id="toggleBoldButton-{{ editor_id }}" type="button" class="p-1.5 text-gray-500 rounded-sm cursor-pointer hover:text-gray-900 hover:bg-gray-100">
                        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5h4.5a3.5 3.5 0 1 1 0 7H8m0-7v7m0-7H6m2 7h6.5a3.5 3.5 0 1 1 0 7H8m0-7v7m0 0H6"/>
                        </svg>
                        <span class="sr-only">Bold</span>
                    </button>
                    
                    <!-- Italic -->
                    <button id="toggleItalicButton-{{ editor_id }}" type="button" class="p-1.5 text-gray-500 rounded-sm cursor-pointer hover:text-gray-900 hover:bg-gray-100">
                        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8.874 19 6.143-14M6 19h6.33m-.66-14H18"/>
                        </svg>
                        <span class="sr-only">Italic</span>
                    </button>
                    
                    <!-- Underline -->
                    <button id="toggleUnderlineButton-{{ editor_id }}" type="button" class="p-1.5 text-gray-500 rounded-sm cursor-pointer hover:text-gray-900 hover:bg-gray-100">
                        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 19h12M8 5v9a4 4 0 0 0 8 0V5M6 5h4m4 0h4"/>
                        </svg>
                        <span class="sr-only">Underline</span>
                    </button>
                    
                    <!-- Bullet List -->
                    <button id="toggleListButton-{{ editor_id }}" type="button" class="p-1.5 text-gray-500 rounded-sm cursor-pointer hover:text-gray-900 hover:bg-gray-100">
                        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 8h10M9 12h10M9 16h10M4.99 8H5m-.02 4h.01m0 4H5"/>
                        </svg>
                        <span class="sr-only">Toggle list</span>
                    </button>
                    
                    <!-- Numbered List -->
                    <button id="toggleOrderedListButton-{{ editor_id }}" type="button" class="p-1.5 text-gray-500 rounded-sm cursor-pointer hover:text-gray-900 hover:bg-gray-100">
                        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6h8m-8 6h8m-8 6h8M4 16a2 2 0 1 1 3.321 1.5L4 20h5M4 5l2-1v6m-2 0h4"/>
                        </svg>
                        <span class="sr-only">Toggle ordered list</span>
                    </button>

                    <button id="typographyDropdownButton-{{ editor_id }}" data-dropdown-toggle="typographyDropdown-{{ editor_id }}" class="flex items-center justify-center rounded-lg bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-500 hover:bg-gray-200 hover:text-gray-900 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-50" type="button">
                        Format
                        <svg class="-me-0.5 ms-1.5 h-3.5 w-3.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7" />
                        </svg>
                    </button>
                    
                    <!-- Heading Dropdown -->
                    <div id="typographyDropdown-{{ editor_id }}" class="z-50 hidden w-72 rounded-sm bg-white p-2 shadow-sm border border-gray-200">
                        <ul class="space-y-1 text-sm font-medium" aria-labelledby="typographyDropdownButton-{{ editor_id }}">
                            <li>
                                <button id="toggleParagraphButton-{{ editor_id }}" type="button" class="flex justify-between items-center w-full text-base rounded-sm px-3 py-2 hover:bg-gray-100 text-gray-900">Paragraph</button>
                            </li>
                            <li>
                                <button data-heading-level="1" type="button" class="flex justify-between items-center w-full text-base rounded-sm px-3 py-2 hover:bg-gray-100 text-gray-900 heading-button-{{ editor_id }}">Heading 1</button>
                            </li>
                            <li>
                                <button data-heading-level="2" type="button" class="flex justify-between items-center w-full text-base rounded-sm px-3 py-2 hover:bg-gray-100 text-gray-900 heading-button-{{ editor_id }}">Heading 2</button>
                            </li>
                            <li>
                                <button data-heading-level="3" type="button" class="flex justify-between items-center w-full text-base rounded-sm px-3 py-2 hover:bg-gray-100 text-gray-900 heading-button-{{ editor_id }}">Heading 3</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Editor Area -->
        <div class="px-4 py-2 bg-white rounded-b-lg">
            <label for="{{ editor_id }}" class="sr-only">{{ label|default:"Editor" }}</label>
            <div id="{{ editor_id }}" class="block w-full px-0 text-sm text-gray-800 bg-white border-0 focus:ring-0" style="min-height: {{ min_height|default:'400px' }};"></div>
            <input type="hidden" name="{{ input_name }}" id="{{ editor_id }}-input" value="{{ content|escape }}">
        </div>
    </div>
</div>


<style>
/* TipTap Editor Styles - Compact Version */
.ProseMirror {
    outline: none;
    padding: 0.75rem;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 0.875rem; /* 14px instead of 16px */
    line-height: 1.4; /* Tighter line height instead of 1.6 */
    color: #374151;
}

.ProseMirror p {
    margin-bottom: 0.5rem; /* Reduced from 1rem */
}

.ProseMirror h1 {
    font-size: 1.5rem; /* Reduced from 2rem */
    font-weight: 700;
    margin-bottom: 0.75rem; /* Reduced from 1rem */
    margin-top: 1rem; /* Reduced from 1.5rem */
}

.ProseMirror h2 {
    font-size: 1.25rem; /* Reduced from 1.5rem */
    font-weight: 600;
    margin-bottom: 0.5rem; /* Reduced from 0.75rem */
    margin-top: 0.75rem; /* Reduced from 1.25rem */
}

.ProseMirror h3 {
    font-size: 1.125rem; /* Reduced from 1.25rem */
    font-weight: 600;
    margin-bottom: 0.375rem; /* Reduced from 0.5rem */
    margin-top: 0.5rem; /* Reduced from 1rem */
}

.ProseMirror ul, .ProseMirror ol {
    margin-left: 1.25rem; /* Reduced from 1.5rem */
    margin-bottom: 0.5rem; /* Reduced from 1rem */
    padding-left: 0;
}

.ProseMirror ul {
    list-style-type: disc;
}

.ProseMirror ol {
    list-style-type: decimal;
}

.ProseMirror li {
    margin-bottom: 0.125rem; /* Reduced from 0.25rem */
}

.ProseMirror p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    float: left;
    color: #9ca3af;
    pointer-events: none;
    height: 0;
}

/* Ensure proper list styling */
.ProseMirror ul li {
    display: list-item;
    list-style-type: disc;
    list-style-position: outside;
}

.ProseMirror ol li {
    display: list-item;
    list-style-type: decimal;
    list-style-position: outside;
}

/* Custom format-sm class for smaller typography */
.format-sm {
    font-size: 0.875rem;
    line-height: 1.4;
}

.format-sm p {
    margin-bottom: 0.5rem;
}

.format-sm h1 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
    margin-top: 1rem;
}

.format-sm h2 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    margin-top: 0.75rem;
}

.format-sm h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 0.375rem;
    margin-top: 0.5rem;
}

.format-sm ul, .format-sm ol {
    margin-left: 1.25rem;
    margin-bottom: 0.5rem;
}

.format-sm li {
    margin-bottom: 0.125rem;
}
</style> 